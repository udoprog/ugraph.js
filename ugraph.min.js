!function(){function n(n,t,e,r){function i(i,u){for(var o=-1,a=i.length,l=n,f=t,s=e,d=r,g=[];++o<a;){for(var v=i[o].data,p=-1,x=v.length;++p<x;){var m=v[p],y=m[0],k=m[1];u(v,y,k,null)&&(l=h(y,l),f=c(y,f),s=h(k,s),d=c(k,d))}g.push({data:v})}return{width:f-l,height:d-s,xmin:l,xmax:f,ymin:s,ymax:d,data:g}}return i}function t(){var n=d3.identity,t=d3.identity,e=d3.functor(!1),r=d3.functor(!1),i=o.LineCap,u=o.LineWidth,a=o.LineColors,l=function(n,t){return r()?d(n,t):s(n,t)},f=function(r,i){var u,o,a,l,f,h=i.data,c=h.length;if(c){o=h[0],a=o[0],l=o[1],f=o[2],r.beginPath(),r.moveTo(n(a),t(l));var s=0;for(u=o;++s<c;)o=h[s],a=o[0],l=o[1],f=o[2],e(u,o)?r.moveTo(n(a),t(l)):r.lineTo(n(a),t(l)),u=o;r.stroke()}},h=function(n,t){for(var e=-1,r=t.length;++e<r;)n.lineCap=i,n.lineWidth=u,n.strokeStyle=a[e%a.length].stroke,f(n,t[e])};return h.calculate=function(n,t){return l(n,t)},h.x=function(t){return n=t,this},h.y=function(n){return t=n,this},h.gap=function(n){return e=n,this},h.zeroBased=function(n){return r=n,this},h.lineCap=function(n){return i=n,this},h.lineWidth=function(n){return u=n,this},h.lineColors=function(n){return a=n,this},h}function e(n,t){for(var e=1/0,r=-1/0,i=1/0,u=-1/0,o=[],a={},l=-1,f=n.length;++l<f;){for(var s=n[l].data,d=-1,g=s.length,v=[];++d<g;){var p=s[d],x=p[0],m=p[1],y=a[x]||0;if(v.push([x,m,y]),a[x]=y+m,t(s,x,m,y)){var k=m+y;e=h(x,e),r=c(x,r),i=h(y,i),u=c(k,u)}}o.push({data:v})}return{width:r-e,height:u-i,xmin:e,xmax:r,ymin:i,ymax:u,data:o}}function r(){var n=d3.identity,t=d3.identity,r=d3.functor(!1),i=d3.functor(!1),u=o.LineCap,a=o.LineWidth,l=o.LineColors,f=e,h=function(e,i){var u,o,a,l,f=i.data,h=0,c=f.length;if(c)for(;c>h;){var s=h;u=f[s++],o=u[0],a=u[1],l=u[2],e.beginPath(),e.lineTo(n(o),t(l+a));for(var d=u;c>s&&(u=f[s],o=u[0],a=u[1],l=u[2],!r(d,u));)++s,e.lineTo(n(o),t(l+a)),d=u;var g=h;for(h=s,--s;s>=g;)u=f[s],o=u[0],a=u[1],l=u[2],e.lineTo(n(o),t(l)),--s;e.closePath(),e.fill()}},c=function(n,t){for(var e,r=-1,i=t.length;++r<i;){e=t[r];var u=l[r%l.length];n.fillStyle=u.fill||u.stroke,h(n,e)}};return c.calculate=function(n,t){return f(n,t)},c.x=function(t){return n=t,this},c.y=function(n){return t=n,this},c.gap=function(n){return r=n,this},c.zeroBased=function(n){return i=n,this},c.lineCap=function(n){return u=n,this},c.lineWidth=function(n){return a=n,this},c.lineColors=function(n){return l=n,this},c}function i(){}function u(){function n(n,t){function r(){if(null===it)return lt===a?void(ut=!1):(z(a),lt=a,void(ut=!1));var n=L(it);lt!==n&&(z(n),lt=n)}function o(){if(null===ot){if(lt==a)return;return X(a),lt=a,void(at=null)}if(ot!==at){var n=w(ot);at=ot,lt!==n&&(X(n),lt=n)}}function m(){return rt===l?(_=l,void R(l)):void(_!==rt&&(R(rt),_=rt))}function y(){return tt===l?(et=!1,_=l,void M(l)):void(_!==tt&&(M(tt),_=tt))}function k(n){var t=Q;return function(e,r,i,u){var o=n[r]||{x:r,data:[]};return o.data.push({entry:e,value:i,stackValue:u}),n[r]=o,t===f?!0:t.x0<=r&&t.x1>=r}}function C(n){for(var t=d3.ascending,e=Object.keys(n).map(function(t){return n[t]}).sort(function(n,e){return t(n.x,e.x)}),r=[],i=[],u=-1,o=e.length;++u<o;){var a=e[u];r.push(a),i.push(a.x)}U={range:i,entries:r}}function b(n){var t=n.xmin,e=n.xmax,r=n.ymin,i=n.ymax;Q!==f&&(t=Q.x0,e=Q.x1),O.range([D,q-D]).domain([t,e]),V.range([Z-D,D]).domain([r,i])}function S(n){if(tt!==l){var r=Math.max(tt.x,n),i=Math.min(tt.x,n),u=O(r)-O(i);tt=l,Q=e>u?f:{x0:i,x1:r},t(function(){T(Q),$.updateSource()})}}function W(n,t){var r=O(t.x),i=O(t.x1),o=Math.min(r,i),a=Math.max(r,i),l=a-o;if(!(e>l)){var f=Z-2*D;n.fillStyle=u,n.fillRect(D,D,o-D,f),n.fillRect(a,D,q-a-D,f)}}function H(n,t){var e=O(t.x);n.beginPath(),n.moveTo(e,0),n.lineTo(e,Z),n.lineCap=d,n.lineWidth=v,n.strokeStyle=g,n.stroke()}function w(n){var t=U.range,e=U.entries;if(!t.length)return a;var r=d3.bisect(t,n);if(0===r)return a;var i=e[r-1];return i.x!==n?a:i}function L(n){var t=U.range,e=U.entries;if(!t.length)return a;var r=d3.bisect(t,n);if(r===e.length)return e[e.length-1];var i=e[r];if(r>0){var u=e[r-1];Math.abs(u.x-n)<Math.abs(i.x-n)&&(i=u)}return i}function T(n){gt({$focus:n})}function R(n){st({$range:n})}function M(n){var t={$range:n};st(t),dt(t)}function X(n){ht({$highlight:n})}function z(n){var t={$highlight:n};ht(t),ct(t)}function P(){(ut?r:o)(),(et?y:m)();var n=lt!==ft,t=_!==nt,e=!j||n||t;e&&(N.clearRect(0,0,q,Z),N.drawImage(A,0,0),j=!0),lt!==ft&&(lt!==a&&(N.save(),H(N,lt),N.restore()),ft=lt),_!==nt&&(nt!==l&&(N.save(),W(N,_),N.restore()),nt=_)}function $(){}if(!n)throw new Error("no element available");t=t||function(n){n.apply(this,arguments)};var B=function(n,t){return null===F?!1:t[0]-n[0]>F},E=!1,Y=!0,D=10,F=null,N=n.getContext("2d"),j=!0,A=document.createElement("canvas"),G=null,I=null,O=d3.scale.linear(),V=d3.scale.linear(),Z=n.offsetHeight,q=n.offsetWidth,J=function(){return E},K=x,Q=f,U={range:[],entries:[]},_=l,nt=l,tt=l,et=!1,rt=l,it=null,ut=!1,ot=null,at=null,lt=a,ft=a,ht=i,ct=i,st=i,dt=i,gt=i;return $.updateSource=function(t){if(t&&(G=t),n.width=q,n.height=Z,A.width=q,A.height=Z,G){var e=K().x(O).y(V).gap(B).zeroBased(J).lineCap(h).lineWidth(c).lineColors(s),r={},i=e.calculate(G,k(r));C(r),I=[e,i],$.updateGraph()}},$.updateGraph=function(){if(I){var n=I[0],t=I[1];b(t);var e=A.getContext("2d");if(!e)throw new Error("failed to access backing graph element for rendering");e.save(),e.clearRect(0,0,q,Z),n(e,t.data),e.restore(),j=!1,P()}},$.updateAutoXval=function(n){ot!==n&&(ot=n,P())},$.updateAutoRange=function(n){n=n||l,rt!==n&&(rt=n,P())},$.updateFocus=function(n){n=n||f,Q!==n&&(Q=n,T(Q),$.updateSource())},$.updateRenderer=function(n){var t=p[n];if(!t)throw new Error("no such renderer: "+String(n));K!==t&&(K=t,$.updateSource())},$.updatePadding=function(n){n=!!n,D!==n&&(D=n,$.updateSource())},$.updateHighlight=function(n){Y=!!n},$.updateCadence=function(n){F!==n&&(F=n,$.updateSource())},$.updateZeroBased=function(n){n=!!n,E!==n&&(E=n,$.updateSource())},$.mousedown=function(n){if(0===n.button){var t=O.invert(n.offsetX),e=V.invert(n.offsetY);tt={x:t,y:e,x1:t,y1:e},et=!0}},$.mouseup=function(n){tt!==l&&S(O.invert(n.offsetX),V.invert(n.offsetY))},$.mousemove=function(n){if(tt!==l){var e=O.invert(n.offsetX),r=V.invert(n.offsetY),i=tt;(i.x1!==e||i.y1!==r)&&(tt={x:i.x,y:i.y,x1:e,y1:r},t(R.bind(tt)))}if(Y){var u=O.invert(n.offsetX);ut=!0,it!==u&&(it=u,t(P))}},$.mouseleave=function(n){tt!==l&&S(O.invert(n.offsetX),V.invert(n.offsetY)),null!==it&&(it=null,t(P))},$.resize=function(){var t=!1,e=n.offsetWidth,r=n.offsetHeight;q!==e&&(q=e,t=!0),Z!==r&&(Z=r,t=!0),t&&$.updateSource()},$.onHighlight=function(n){return ht=n,this},$.onHoverHighlight=function(n){return ct=n,this},$.onRange=function(n){return st=n,this},$.onDragRange=function(n){return dt=n,this},$.onFocus=function(n){return gt=n||i,this},$}var e=o.ClickThreshold,u=o.DragStyle,h=o.LineCap,c=o.LineWidth,s=o.LineColors,d=o.HighlightCap,g=o.HighlightStyle,v=o.HighlightWidth,p={line:t,"stacked-line":r},x=t;return n.clickThreshold=function(n){return arguments.length?(e=n,this):e},n.dragStyle=function(n){return arguments.length?(u=n,this):u},n.lineCap=function(n){return arguments.length?(h=n,this):h},n.lineWidth=function(n){return arguments.length?(c=n,this):c},n.lineWidth=function(n){return arguments.length?(c=n,this):c},n.highlightCap=function(n){return arguments.length?(d=n,this):d},n.highlightStyle=function(n){return arguments.length?(g=n,this):g},n.highlightWidth=function(n){return arguments.length?(v=n,this):v},n.lineColors=function(n){return arguments.length?(s=n,this):s},n}var o={version:"0.0.3"},a=o.NoHighlight={x:null,data:[]},l=o.NoRange={x:null,y:null,x1:null,y1:null},f=o.NoFocus={x0:null,x1:null};o.ClickThreshold=5,o.DragStyle="rgba(0, 0, 0, 0.3)",o.LineCap="round",o.LineWidth=2,o.LineColors=[{stroke:"#a6cee3"},{stroke:"#1f78b4"},{stroke:"#b2df8a"},{stroke:"#33a02c"},{stroke:"#fb9a99"},{stroke:"#e31a1c"},{stroke:"#fdbf6f"},{stroke:"#ff7f00"},{stroke:"#cab2d6"},{stroke:"#6a3d9a"},{stroke:"#ffff99"},{stroke:"#b15928"}],o.HighlightCap="butt",o.HighlightWidth=3,o.HighlightStyle="rgba(0, 0, 0, 1.0)",o.graph=u,o.renderer={},o.calculate={};var h=Math.min,c=Math.max,s=o.calculate.normal=n(1/0,-1/0,1/0,-1/0),d=o.calculate.zerobased=n(1/0,-1/0,0,-1/0);o.renderer.line=t,o.calculate.stacked=e,o.renderer.stackedline=r,"function"==typeof define&&define.amd?define(o):"object"==typeof module&&module.exports&&(module.exports=o),this.ugraph=o}();